<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Physics of Renewable Energy Systems - NPTEL Quiz</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #f0fdf4 0%, #dbeafe 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        .header {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            padding: 30px;
            margin-bottom: 30px;
            text-align: center;
        }
        .header h1 { color: #1f2937; font-size: 28px; margin-bottom: 10px; }
        .header p { color: #6b7280; font-size: 14px; }
        .weeks-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .week-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }
        .week-card:hover {
            transform: translateY(-5px);
            border-color: #10b981;
            box-shadow: 0 8px 12px rgba(0,0,0,0.15);
        }
        .week-card h3 { color: #1f2937; font-size: 18px; margin-bottom: 10px; }
        .week-card p { color: #6b7280; font-size: 14px; margin-bottom: 15px; }
        .week-card button {
            width: 100%;
            background: #10b981;
            color: white;
            border: none;
            padding: 12px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
        }
        .week-card button:hover { background: #059669; }
        .quiz-container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            padding: 30px;
            display: none;
        }
        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e5e7eb;
        }
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            margin-bottom: 30px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: #10b981;
            transition: width 0.3s;
        }
        .question-card { margin-bottom: 30px; }
        .question-text {
            font-size: 20px;
            color: #1f2937;
            margin-bottom: 20px;
            font-weight: 600;
            line-height: 1.6;
        }
        .options { display: flex; flex-direction: column; gap: 12px; }
        .option {
            padding: 16px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            background: white;
        }
        .option:hover { border-color: #3b82f6; background: #eff6ff; }
        .option.selected { border-color: #3b82f6; background: #dbeafe; }
        .option.correct { border-color: #10b981; background: #d1fae5; }
        .option.incorrect { border-color: #ef4444; background: #fee2e2; }
        .explanation {
            margin-top: 20px;
            padding: 16px;
            background: #dbeafe;
            border-left: 4px solid #3b82f6;
            border-radius: 4px;
            display: none;
        }
        .explanation.show { display: block; }
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            gap: 12px;
            margin-top: 30px;
        }
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        .btn-primary { background: #10b981; color: white; }
        .btn-primary:hover { background: #059669; }
        .btn-secondary { background: #6b7280; color: white; }
        .btn-secondary:hover { background: #4b5563; }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        .modal.show { display: flex; }
        .modal-content {
            background: white;
            border-radius: 12px;
            padding: 40px;
            max-width: 400px;
            text-align: center;
            box-shadow: 0 20px 25px rgba(0,0,0,0.2);
        }
        .modal-content h2 { color: #1f2937; margin-bottom: 10px; }
        .score {
            font-size: 48px;
            color: #10b981;
            font-weight: bold;
            margin: 20px 0;
        }
        .hidden { display: none; }
        .info-banner {
            background: #d1fae5;
            border-left: 4px solid #10b981;
            padding: 16px;
            border-radius: 8px;
            margin-top: 20px;
        }
        .info-banner p { font-size: 14px; color: #065f46; }
        @media (max-width: 768px) {
            .header h1 { font-size: 22px; }
            .weeks-grid { grid-template-columns: 1fr; }
            .quiz-header { flex-direction: column; gap: 10px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="home-view">
            <div class="header">
                <h1>üìö Physics of Renewable Energy Systems</h1>
                <p>NPTEL Quiz Practice Portal</p>
                <p style="margin-top: 8px; font-size: 13px;">‚úì Unlimited Retakes ‚Ä¢ ‚úì Instant Feedback ‚Ä¢ ‚úì Detailed Explanations</p>
            </div>
            <div class="weeks-grid" id="weeks-container"></div>
            <div class="info-banner">
                <p><strong>üéâ Complete!</strong> All 12 weeks available with 180 questions total. Ready to practice!</p>
            </div>
        </div>

        <div id="quiz-view" class="quiz-container">
            <div class="quiz-header">
                <button class="btn btn-secondary" onclick="goHome()">‚Üê Home</button>
                <div style="text-align: center;">
                    <h2 id="quiz-title"></h2>
                    <p id="question-counter"></p>
                </div>
                <div style="width: 80px;"></div>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress"></div>
            </div>
            <div class="question-card">
                <div class="question-text" id="question-text"></div>
                <div class="options" id="options-container"></div>
                <div class="explanation" id="explanation"></div>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="previousQuestion()" id="prev-btn">Previous</button>
                <div style="display: flex; gap: 12px;">
                    <button class="btn btn-primary" onclick="toggleExplanation()" id="explain-btn" style="display: none;">Show Answer</button>
                    <button class="btn btn-primary" onclick="nextQuestion()" id="next-btn">Next</button>
                    <button class="btn btn-primary" onclick="submitQuiz()" id="submit-btn" style="display: none;">Submit Quiz</button>
                </div>
            </div>
        </div>

        <div class="modal" id="results-modal">
            <div class="modal-content">
                <h2>üéâ Quiz Completed!</h2>
                <div class="score" id="final-score"></div>
                <p id="percentage"></p>
                <div style="display: flex; gap: 12px; margin-top: 30px; justify-content: center;">
                    <button class="btn btn-primary" onclick="retakeQuiz()">Retake</button>
                    <button class="btn btn-secondary" onclick="goHome()">Home</button>
                </div>
            </div>
        </div>
    </div>

    <script src="questions.js"></script>
    <script>
        const weeks = [
            { id: 'week1', name: 'Week 1: Fundamentals & Solar Energy', count: 15 },
            { id: 'week2', name: 'Week 2: Semiconductors & PV Technology', count: 15 },
            { id: 'week3', name: 'Week 3: Fluid Mechanics & Wind Energy', count: 15 },
            { id: 'week4', name: 'Week 4: Waves & Hydroelectric Power', count: 15 },
            { id: 'week5', name: 'Week 5: Energy Storage Systems', count: 15 },
            { id: 'week6', name: 'Week 6: Battery Technology', count: 15 },
            { id: 'week7', name: 'Week 7: Supercapacitors', count: 15 },
            { id: 'week8', name: 'Week 8: Characterization Techniques', count: 15 },
            { id: 'week9', name: 'Week 9: Advanced Characterization', count: 15 },
            { id: 'week10', name: 'Week 10: Nanomaterials & Catalysis', count: 15 },
            { id: 'week11', name: 'Week 11: Spectroscopy & XRD', count: 15 },
            { id: 'week12', name: 'Week 12: Microscopy & Surface Analysis', count: 15 }
        ];

        let currentWeek = null;
        let currentQuestionIndex = 0;
        let selectedAnswers = {};
        let quizCompleted = false;
        let showingExplanation = false;

        function init() {
            renderWeeks();
        }

        function renderWeeks() {
            const container = document.getElementById('weeks-container');
            container.innerHTML = weeks.map(week => `
                <div class="week-card" onclick="startQuiz('${week.id}')">
                    <h3>${week.name}</h3>
                    <p>${week.count} Questions</p>
                    <button>Start Quiz</button>
                </div>
            `).join('');
        }

        function startQuiz(weekId) {
            if (!questionBank[weekId]) {
                alert('Questions for this week are not yet available.');
                return;
            }
            currentWeek = weekId;
            currentQuestionIndex = 0;
            selectedAnswers = {};
            quizCompleted = false;
            showingExplanation = false;

            document.getElementById('home-view').classList.add('hidden');
            document.getElementById('quiz-view').style.display = 'block';

            const weekInfo = weeks.find(w => w.id === weekId);
            document.getElementById('quiz-title').textContent = weekInfo.name;
            renderQuestion();
        }

        function renderQuestion() {
            const questions = questionBank[currentWeek];
            const question = questions[currentQuestionIndex];
            const progress = ((currentQuestionIndex + 1) / questions.length) * 100;

            document.getElementById('progress').style.width = progress + '%';
            document.getElementById('question-counter').textContent = 
                `Question ${currentQuestionIndex + 1} of ${questions.length}`;
            document.getElementById('question-text').textContent = question.question;

            const optionsContainer = document.getElementById('options-container');
            optionsContainer.innerHTML = question.options.map((option, index) => {
                let className = 'option';
                const isSelected = selectedAnswers[currentQuestionIndex] === index;
                const isCorrect = index === question.correct;

                if (quizCompleted || showingExplanation) {
                    if (isCorrect) className += ' correct';
                    else if (isSelected && !isCorrect) className += ' incorrect';
                } else if (isSelected) {
                    className += ' selected';
                }

                return `<div class="${className}" onclick="selectAnswer(${index})">${option}</div>`;
            }).join('');

            document.getElementById('explanation').textContent = question.explanation;
            document.getElementById('explanation').classList.toggle('show', showingExplanation);

            document.getElementById('prev-btn').disabled = currentQuestionIndex === 0;
            document.getElementById('explain-btn').style.display = 
                !quizCompleted && selectedAnswers[currentQuestionIndex] !== undefined ? 'block' : 'none';
            document.getElementById('next-btn').style.display = 
                currentQuestionIndex < questions.length - 1 ? 'block' : 'none';
            document.getElementById('submit-btn').style.display = 
                currentQuestionIndex === questions.length - 1 && !quizCompleted ? 'block' : 'none';
        }

        function selectAnswer(index) {
            if (quizCompleted) return;
            selectedAnswers[currentQuestionIndex] = index;
            renderQuestion();
        }

        function toggleExplanation() {
            showingExplanation = !showingExplanation;
            document.getElementById('explain-btn').textContent = 
                showingExplanation ? 'Hide Answer' : 'Show Answer';
            renderQuestion();
        }

        function nextQuestion() {
            const questions = questionBank[currentWeek];
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                showingExplanation = false;
                renderQuestion();
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                showingExplanation = false;
                renderQuestion();
            }
        }

        function submitQuiz() {
            const questions = questionBank[currentWeek];
            let score = 0;

            questions.forEach((question, index) => {
                if (selectedAnswers[index] === question.correct) {
                    score++;
                }
            });

            quizCompleted = true;
            showingExplanation = true;
            renderQuestion();

            const percentage = Math.round((score / questions.length) * 100);
            document.getElementById('final-score').textContent = `${score} / ${questions.length}`;
            document.getElementById('percentage').textContent = `You scored ${percentage}%`;
            document.getElementById('results-modal').classList.add('show');
        }

        function retakeQuiz() {
            document.getElementById('results-modal').classList.remove('show');
            currentQuestionIndex = 0;
            selectedAnswers = {};
            quizCompleted = false;
            showingExplanation = false;
            renderQuestion();
        }

        function goHome() {
            document.getElementById('results-modal').classList.remove('show');
            document.getElementById('home-view').classList.remove('hidden');
            document.getElementById('quiz-view').style.display = 'none';
        }

        init();
    </script>
</body>
</html>
